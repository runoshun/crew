# git-crew configuration

[agents]
## Common agent settings
# default_worker = "<<.DefaultWorkerName>>"   # Default agent for starting tasks
# default_manager = "<<.DefaultWorkerName>>-manager"  # Default agent for manager mode

## Built-in agent customization
## Fields for all agents:
## - inherit: Name of agent to inherit from (copies all fields, allows overrides)
## - role: Agent role ("worker", "reviewer", "manager")
## - command_template: Full command template
## - system_prompt: System prompt template
## - prompt: User prompt template (added after system_prompt)
## - args: Additional arguments
## - default_model: Default model for this agent
## - description: Description of the agent's purpose
## - setup_script: Script to run after worktree creation (template-expanded)
## - hidden: Hide from TUI agent list (default: false)

<<range .Agents>>
# [agents.<<.Name>>]
<<- if eq .Role "worker">>
# role = "worker"
<<- else if eq .Role "manager">>
# role = "manager"
<<- else if eq .Role "reviewer">>
# role = "reviewer"
<<- end>>
<<- if .Args>>
# args = <<.Args | printf "%q">>
<<- end>>
# default_model = ""  # Override model (e.g., "opus", "sonnet")
<<- if .Description>>
# description = <<.Description | printf "%q">>
<<- end>>

<<end>>

[worktree]
## Worktree initialization settings (applied to all workers)
## - setup_command: Command to run after worktree creation
## - copy: Files/directories to copy from main repo (uses CoW if available)
# setup_command = ""
# copy = []

[complete]
## CI gate on completion
# command = "mise run ci"

[diff]
## Diff display settings
## - command: Shell command to display diff. Supports template variables:
##   - {{.BaseBranch}}: Task's base branch (e.g., "main")
##   - {{.Args}}: Additional arguments passed to the diff command
##     The command runs from the worktree directory.
## - tui_command: Command for TUI diff display (optional)
# command = "git diff {{.BaseBranch}}...HEAD{{if .Args}} {{.Args}}{{end}}"
# tui_command = "git diff --color {{.BaseBranch}}...HEAD | less -R"

[log]
## Log settings
# level = "<<.LogLevel>>"  # debug, info, warn, error

# ----------------------------------------------------------------------------
## Custom Agent CLI configuration
## You can add custom AI agent CLIs
##
## Fields:
## - command_template: How to assemble the full command
##   Available variables: {{.Model}}, {{.Args}}, {{.Prompt}}, {{.Continue}}
## - default_model: Default model for this agent
## - description: Description of the agent's purpose
## - setup_script: Script to run after worktree creation (template-expanded)
##   Available variables: {{.GitDir}}, {{.RepoRoot}}, {{.Worktree}}, {{.TaskID}}
##   The GIT_INFO_EXCLUDE env var points to .git/info/exclude for adding patterns

## Custom agent example
# [agents.my-agent]
# role = "worker"
# command_template = "my-custom-agent -m {{.Model}} {{.Args}} {{.Prompt}}"
# default_model = "my-model"
# description = "My custom AI agent"
# setup_script = """
# #!/bin/bash
# cd {{.Worktree}}
# echo "Setting up worktree for task {{.TaskID}}"
# # Add exclude patterns
# echo ".my-agent-cache/" >> "$GIT_INFO_EXCLUDE"
# """

